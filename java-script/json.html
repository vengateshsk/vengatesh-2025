<!DOCTYPE html>
<html>
<head>
<title>JSON Card View with Images</title>
<link rel="stylesheet" href="/java-script/json.css">
</head>
<body>

<h2>JSON </h2>

<!-- Search -->
<input type="text" id="searchBox" placeholder="Search by name..." onkeyup="renderTable()" />

<!-- Filter by category -->
<select id="filterCategory" onchange="renderTable()">
  <option value="">All Categories</option>
  <option value="Fruit">Fruit</option>
  <option value="Vegetable">Vegetable</option>
</select>

<!-- Sort -->
<select id="sortOption" onchange="renderTable()">
  <option value="">Sort By</option>
  <option value="name">Name</option>
  <option value="price">Price</option>
  <option value="category">Category</option>
  <option value="id">ID</option>
</select> 
<br><br>

<!-- Add / Update -->
<input type="hidden" id="itemId">
<input type="text" id="itemName" placeholder="Name">
<input type="text" id="itemCategory" placeholder="Category">
<input type="number" id="itemPrice" placeholder="Price">
<input type="text" id="itemImg" placeholder="Image URL">
<button onclick="saveItem()">Save</button>

<!-- Card Container -->
<div id="dataTable" class="card-container"></div>

<script>
let data = [
  { id: 1, name: "Apple", category: "Fruit", price: 50, img: "/img/apple.jpg" },
  { id: 2, name: "Carrot", category: "Vegetable", price: 20, img: "/img/carrot.jpg" },
  { id: 3, name: "Banana", category: "Fruit", price: 10, img: "/img/banana.jpg" },
    { id: 4, name: "Broccoli", category: "Vegetable", price: 30, img: "/img/broccoli.jpg" },
    { id: 5, name: "Orange", category: "Fruit", price: 40, img: "/img/orange.jpg" },
    { id: 6, name: "Potato", category: "Vegetable", price: 15, img: "/img/potato.jpg" }
    
];

function renderTable() {
  let search = document.getElementById("searchBox").value.toLowerCase();
  let filter = document.getElementById("filterCategory").value;
  let sort = document.getElementById("sortOption").value;

  let filteredData = data.filter(item =>
    item.name.toLowerCase().includes(search) &&
    (filter === "" || item.category === filter)
  );

  if (sort) {
    filteredData.sort((a, b) => {
      if (typeof a[sort] === "string") {
        return a[sort].localeCompare(b[sort]);
      } else {
        return a[sort] - b[sort];
      }
    });
  }

  let html = "";
  filteredData.forEach(item => {
    html += `
      <div class="card">
        <img src="${item.img}" alt="${item.name}">
        <div class="card-content">
          <h3>${item.name}</h3>
          <p><strong>ID:</strong> ${item.id}</p>
          <p><strong>Category:</strong> ${item.category}</p>
          <p><strong>Price:</strong> â‚¹${item.price}</p>
          <div class="actions">
            <button onclick="editItem(${item.id})">Edit</button>
            <button onclick="deleteItem(${item.id})">Delete</button>
          </div>
        </div>
      </div>
    `;
  });
  document.getElementById("dataTable").innerHTML = html;
}

function saveItem() {
  let id = document.getElementById("itemId").value;
  let name = document.getElementById("itemName").value;
  let category = document.getElementById("itemCategory").value;
  let price = parseFloat(document.getElementById("itemPrice").value);
  let img = document.getElementById("itemImg").value;

  if (!name || !category || isNaN(price) || !img) {
    alert("Please fill all fields");
    return;
  }

  if (id) {
    let item = data.find(i => i.id == id);
    item.name = name;
    item.category = category;
    item.price = price;
    item.img = img;
  } else {
    let newId = data.length ? Math.max(...data.map(i => i.id)) + 1 : 1;
    data.push({ id: newId, name, category, price, img });
  }

  document.getElementById("itemId").value = "";
  document.getElementById("itemName").value = "";
  document.getElementById("itemCategory").value = "";
  document.getElementById("itemPrice").value = "";
  document.getElementById("itemImg").value = "";
  renderTable();
}

function editItem(id) {
  let item = data.find(i => i.id === id);
  document.getElementById("itemId").value = item.id;
  document.getElementById("itemName").value = item.name;
  document.getElementById("itemCategory").value = item.category;
  document.getElementById("itemPrice").value = item.price;
  document.getElementById("itemImg").value = item.img;
}

function deleteItem(id) {
  data = data.filter(item => item.id !== id);
  renderTable();
}

renderTable();
</script>

</body>
</html>
